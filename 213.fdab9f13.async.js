"use strict";(self.webpackChunk_infore_editor=self.webpackChunk_infore_editor||[]).push([[213],{213:function(je,W,d){d.r(W),d.d(W,{defaultControlMapService:function(){return xe}});var j=d(67294),V=d(97857),t=d.n(V),f="flowchart-editor",B=24,F={id:"",fontFill:"#000",fontSize:12,label:"",vertices:[],angle:0,zIndex:10,ports:{items:[{group:"top",id:"039df63e-fe68-48d5-a770-6a5e4915c268"},{group:"right",id:"0fdb5771-d38d-42d8-a64f-bd4feea7a52f"},{group:"bottom",id:"b4f349e9-d77e-4035-835c-2db25ec90a24"},{group:"left",id:"9003e475-f1c5-4ae3-a25a-4cf89a4f2b73"}],groups:{top:{position:{name:"top"},attrs:{circle:{r:4,magnet:!0,stroke:"#31d0c6",strokeWidth:2,fill:"#fff",style:{visibility:"hidden"}}},zIndex:10},right:{position:{name:"right"},attrs:{circle:{r:4,magnet:!0,stroke:"#31d0c6",strokeWidth:2,fill:"#fff",style:{visibility:"hidden"}}},zIndex:10},bottom:{position:{name:"bottom"},attrs:{circle:{r:4,magnet:!0,stroke:"#31d0c6",strokeWidth:2,fill:"#fff",style:{visibility:"hidden"}}},zIndex:10},left:{position:{name:"left"},attrs:{circle:{r:4,magnet:!0,stroke:"#31d0c6",strokeWidth:2,fill:"#fff",style:{visibility:"hidden"}}},zIndex:10}}}},E={width:12,height:8,name:"classic",offset:0},z={width:0,height:0,name:""},Y={target:{sourceMarker:z,targetMarker:E},source:{sourceMarker:E,targetMarker:z},both:{sourceMarker:E,targetMarker:E},none:{sourceMarker:z,targetMarker:z}},J={solid:"0 0",dash:"5 5"},pe={line:"line",SecondOrderBezierCurve:"SecondOrderBezierCurve",ThirdOrderBezierCurve:"ThirdOrderBezierCurve",rounded:"rounded",arcline:"arcline"},T={id:"",source:"",target:"",arrow:"both",type:"line",style:"solid",stroke:"#A2B1C3",strokeWidth:1,fontFill:"#000",connector:{name:"line",args:{radius:20}},attrs:{line:t()(t()({stroke:"#A2B1C3",strokeWidth:1},Y.both),{},{strokeDasharray:J.solid}),text:{fill:"#000",fontSize:12,textAnchor:"middle",textVerticalAnchor:"middle"}},zIndex:1},e=d(85893),K=function(){return(0,e.jsx)("div",{className:"".concat(f,"-canvas-panel"),children:(0,e.jsx)("span",{children:"\u672A\u9009\u4E2D"})})},Q=d(9783),y=d.n(Q),U=d(5574),I=d.n(U),P=d(31081),be=d(29913),$=d(71577),q=d(75023),Z=d(73935),_=d(58167),ee=function(n){var s=n.label,u=n.value,r=u===void 0?"":u,h=n.onChange,v=(0,j.useState)(!1),l=I()(v,2),g=l[0],c=l[1],i=(0,j.useRef)(r),a=(0,_.XZ)(),o=a.graphProvider,x=(0,j.useRef)();o.getGraphOptions().then(function(N){x.current=N});var m=function(){return(0,e.jsx)("div",{className:"".concat(f,"-pick-color-container"),children:(0,e.jsxs)("div",{className:"".concat(f,"-popover"),children:[(0,e.jsx)(q.xS,{onChange:function(w){i.current=w.hex}}),(0,e.jsxs)("div",{className:"foolter",children:[(0,e.jsx)($.Z,{onClick:function(){c(!1)},children:"\u53D6\u6D88"}),(0,e.jsx)($.Z,{type:"primary",onClick:function(){h==null||h(i.current),c(!1)},children:"\u786E\u8BA4"})]})]})})},p=function(k){var w=document.getElementsByClassName("".concat(f,"-pick-color-container"));if(w.length&&Array.from(w).forEach(function(H){var M;(M=H.parentNode)===null||M===void 0||M.removeChild(H)}),!!k){var me=document.createElement("div");(0,Z.render)((0,Z.createPortal)((0,e.jsx)(m,{}),document.getElementsByTagName("body")[0]),me)}};return(0,e.jsxs)("div",{className:"group",children:[s&&(0,e.jsx)("label",{children:s}),(0,e.jsx)("div",{className:"".concat(f,"-color-container"),onClick:function(){c(!0)},children:(0,e.jsx)("div",{className:"".concat(f,"-color"),style:{backgroundColor:r,height:"100%"}})}),p(g)]})},b=(0,j.memo)(ee,function(C,n){return C.label===n.label&&C.value===n.value}),ye=d(69463),ne=d(96365),ae=function(n){var s=n.label,u=s===void 0?"\u6807\u7B7E":s,r=n.value,h=n.onChange;return(0,e.jsxs)("div",{className:"group",children:[(0,e.jsx)("label",{children:u}),(0,e.jsx)(ne.Z,{value:r,style:{height:B},onChange:function(l){h==null||h(l.target.value)}})]})},G=ae,Ne=d(25359),R=d(87799),oe=function(n){var s=n.label,u=n.value,r=n.onChange,h=n.min,v=n.width;return(0,e.jsxs)("div",{className:"group",children:[s&&(0,e.jsx)("label",{children:s}),(0,e.jsx)(R.Z,{value:u,min:h,style:{width:v,height:B},onChange:function(g){r==null||r(g)}})]})},S=oe,A=function(n){var s=n.value,u=n.onChangeItem,r=n.addonBefore;return(0,e.jsxs)("div",{className:"addon-before-group",children:[(0,e.jsx)(R.Z,{value:s,style:{height:B,border:"none"},onChange:function(v){u(v)}}),(0,e.jsx)("span",{children:r})]})},te=function(n){var s=n.x,u=n.y,r=n.onChange;return(0,e.jsxs)("div",{className:"group",children:[(0,e.jsx)("label",{children:"\u4F4D\u7F6E"}),(0,e.jsxs)("div",{className:"split",children:[(0,e.jsx)(A,{addonBefore:"X",value:s,onChangeItem:function(v){r==null||r("x",v)}}),(0,e.jsx)(A,{addonBefore:"Y",value:u,onChangeItem:function(v){r==null||r("y",v)}})]})]})},O=te,Se=d(95985),re=d(34041),ie=function(n){var s=n.label,u=s===void 0?"\u7BAD\u5934":s,r=n.value,h=n.onChange,v=n.options,l=v===void 0?[]:v,g=n.width;return(0,e.jsxs)("div",{className:"group",children:[(0,e.jsx)("label",{children:u}),(0,e.jsx)(re.Z,{size:"small",value:r,style:{width:g,height:B},getPopupContainer:function(i){return i.parentNode},optionFilterProp:"children",onChange:function(i){h==null||h(i)},filterOption:function(i,a){var o=a,x=o.label,m=x===void 0?"":x;return typeof m=="string"?m.toLowerCase().indexOf(i.toLowerCase())>=0:m.toString().indexOf(i.toLowerCase())>=0},options:l})]})},D=ie,le=function(n){var s=n.width,u=n.height,r=n.onChange;return(0,e.jsxs)("div",{className:"group",children:[(0,e.jsx)("label",{children:"\u5C3A\u5BF8"}),(0,e.jsxs)("div",{className:"split",children:[(0,e.jsx)(A,{addonBefore:"W",value:s,onChangeItem:function(v){r==null||r("width",v)}}),(0,e.jsx)(A,{addonBefore:"H",value:u,onChangeItem:function(v){r==null||r("height",v)}})]})]})},L=le,se=function(n){var s,u=n.config,r=n.plugin,h=r.updateEdge,v=(0,j.useState)(t()(t()({},T),u)),l=I()(v,2),g=l[0],c=l[1];(0,j.useEffect)(function(){c(t()(t()({},T),u))},[u]);var i=function(o,x){if(o==="vertice"){var m=g.vertices.map(function(p,N){return N===x.index?t()(t()({},x.value),{},{update:!0}):p});c(t()(t()({},g),{},{vertices:m})),h({vertices:m})}else c(t()(t()({},g),{},y()({},o,x))),h(y()({},o,x))};return(0,e.jsxs)("div",{className:"".concat(f,"-panel-body"),children:[(0,e.jsxs)("div",{className:"".concat(f,"-panel-group"),children:[(0,e.jsx)("h5",{children:"\u5185\u5BB9"}),(0,e.jsx)(G,{label:"\u6807\u7B7E",value:g.label,onChange:function(o){i("label",o)}})]}),(0,e.jsx)("h5",{style:{marginBottom:12},children:"\u6837\u5F0F"}),(0,e.jsxs)("div",{className:"".concat(f,"-panel-group"),style:{marginBottom:0},children:[(0,e.jsx)("h5",{children:"\u7EBF"}),(0,e.jsx)(D,{label:"\u7BAD\u5934",value:g.arrow,width:"100%",options:[{label:"\u6B63\u5411",value:"target"},{label:"\u9006\u5411",value:"source"},{label:"\u53CC\u5411",value:"both"}],onChange:function(o){i("arrow",o)}}),(0,e.jsx)("div",{className:"".concat(f,"-edge-stroke-style"),children:(0,e.jsx)(D,{label:"\u7EBF\u5F62",width:68,value:g.style,options:[{label:"\u5B9E\u7EBF",value:"solid"},{label:"\u865A\u7EBF",value:"dash"}],onChange:function(o){i("style",o)}})}),(0,e.jsx)(D,{label:"\u7C7B\u578B",value:g.type,width:"100%",options:[{label:"\u76F4\u7EBF",value:"line"},{label:"\u4E8C\u9636\u8D1D\u585E\u5C14\u66F2\u7EBF",value:"SecondOrderBezierCurve"},{label:"\u4E09\u9636\u8D1D\u585E\u5C14\u66F2\u7EBF",value:"ThirdOrderBezierCurve"},{label:"\u5706\u89D2\u66F2\u7EBF",value:"rounded"},{label:"\u5F27\u7EBF",value:"ArcLine"}],onChange:function(o){i("type",o)}}),["rounded","ArcLine"].includes(g.type)&&(0,e.jsx)(S,{label:"\u534A\u5F84",min:20,value:g.radius,onChange:function(o){i("radius",o)}}),(0,e.jsxs)("div",{className:"".concat(f,"-panel-group"),style:{marginBottom:0},children:[(0,e.jsx)("h5",{children:"\u63A7\u5236\u70B9"}),(s=g.vertices)===null||s===void 0?void 0:s.map(function(a,o){return(0,e.jsx)(O,{x:a.x,y:a.y,onChange:function(m,p){i("vertice",{index:o,value:t()(t()({},a),{},y()({},m,p))})}},"".concat(o))})]}),(0,e.jsx)(b,{label:"\u8FB9\u6846",value:g.stroke,onChange:function(o){i("stroke",o)}})]}),(0,e.jsxs)("div",{className:"".concat(f,"-panel-group"),children:[(0,e.jsx)("h5",{children:"\u6807\u7B7E"}),(0,e.jsxs)("div",{className:"".concat(f,"-edge-text-style"),children:[(0,e.jsx)(S,{label:"\u5B57\u53F7",min:10,width:68,value:g.fontSize||12,onChange:function(o){i("fontSize",o)}}),(0,e.jsx)(b,{value:g.fontFill||"#000",onChange:function(o){i("fontFill",o)}})]})]})]})},ue=function(n){return(0,e.jsx)(P.FlowchartFormWrapper,t()(t()({},n),{},{type:"edge",children:function(u,r){return(0,e.jsx)(se,t()(t()({},n),{},{plugin:r,config:u}))}}))},ce=function(n){var s=n.config,u=n.plugin,r=u.updateGroup,h=(0,j.useState)(t()(t()({},F),s)),v=I()(h,2),l=v[0],g=v[1],c=function(a,o){g(t()(t()({},l),{},y()({},a,o))),r(y()({},a,o))};return(0,j.useEffect)(function(){g(t()(t()({},F),s))},[s]),(0,e.jsxs)("div",{className:"".concat(f,"-panel-body"),children:[(0,e.jsxs)("div",{className:"".concat(f,"-panel-group"),children:[(0,e.jsx)("h5",{children:"\u5185\u5BB9"}),(0,e.jsx)(G,{label:"\u6807\u9898",value:l.label,onChange:function(a){c("label",a)}})]}),(0,e.jsxs)("div",{className:"".concat(f,"-panel-group"),children:[(0,e.jsx)("h5",{children:"\u6837\u5F0F"}),(0,e.jsx)(O,{x:l.x,y:l.y,onChange:function(a,o){c(a,o)}}),(0,e.jsx)(L,{width:l.width,height:l.height,onChange:function(a,o){c(a,o)}}),(0,e.jsx)(b,{label:"\u586B\u5145",value:l.fill,onChange:function(a){c("fill",a)}}),(0,e.jsx)(b,{label:"\u8FB9\u6846",value:l.stroke,onChange:function(a){c("stroke",a)}}),(0,e.jsxs)("div",{className:"".concat(f,"-node-text-style"),children:[(0,e.jsx)(S,{label:"\u5B57\u53F7",value:l.fontSize,width:68,onChange:function(a){c("fontSize",a)}}),(0,e.jsx)(b,{value:l.fontFill,onChange:function(a){c("fontFill",a)}})]})]})]})},de=function(n){return(0,e.jsx)(P.FlowchartFormWrapper,t()(t()({},n),{},{type:"group",children:function(u,r){return(0,e.jsx)(ce,t()(t()({},n),{},{plugin:r,config:u}))}}))},he=d(15009),X=d.n(he),ve=d(99289),ge=d.n(ve),fe=function(n){var s=n.config,u=n.plugin,r=u.updateNode,h=(0,j.useState)(t()(t()({},F),s)),v=I()(h,2),l=v[0],g=v[1],c=function(){var i=ge()(X()().mark(function a(o,x){return X()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:g(t()(t()({},l),{},y()({},o,x))),console.log(),r(y()({},o,x));case 3:case"end":return p.stop()}},a)}));return function(o,x){return i.apply(this,arguments)}}();return(0,j.useEffect)(function(){g(t()(t()({},F),s))},[s]),(0,e.jsxs)("div",{className:"".concat(f,"-panel-body"),children:[(0,e.jsxs)("div",{className:"".concat(f,"-panel-group"),children:[(0,e.jsx)("h5",{children:"\u5185\u5BB9"}),(0,e.jsx)(G,{label:"\u6807\u9898",value:l.label,onChange:function(a){c("label",a)}})]}),(0,e.jsxs)("div",{className:"".concat(f,"-panel-group"),children:[(0,e.jsx)("h5",{children:"\u6837\u5F0F"}),(0,e.jsx)(O,{x:l.x,y:l.y,onChange:function(a,o){c(a,o)}}),(0,e.jsx)(L,{width:l.width,height:l.height,onChange:function(a,o){c(a,o)}}),(0,e.jsx)(S,{label:"\u89D2\u5EA6",value:l.angle,width:68,onChange:function(a){c("angle",a)}}),(0,e.jsx)(b,{label:"\u586B\u5145",value:l.fill,onChange:function(a){c("fill",a)}}),(0,e.jsx)(b,{label:"\u8FB9\u6846",value:l.stroke,onChange:function(a){c("stroke",a)}}),(0,e.jsxs)("div",{className:"".concat(f,"-node-text-style"),children:[(0,e.jsx)(S,{label:"\u5B57\u53F7",value:l.fontSize,width:68,onChange:function(a){c("fontSize",a)}}),(0,e.jsx)(b,{value:l.fontFill,onChange:function(a){c("fontFill",a)}})]})]})]})},Ce=function(n){return(0,e.jsx)(P.FlowchartFormWrapper,t()(t()({},n),{},{type:"node",children:function(u,r){return(0,e.jsx)(fe,t()(t()({},n),{},{plugin:r,config:u}))}}))},xe=function(n){return n.set("node-service",Ce),n.set("edge-service",ue),n.set("group-service",de),n.set("canvas-service",K),n}}}]);
